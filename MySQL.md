# MySQL

MySQL是一种**关系型数据库**。

## 引擎

MySQL的默认引擎为**InnoDB**（5.5版之后）。InnoDB是**事务性存储引擎**，也就是说**InnoDB支持事务**。

**MyISAM和InnoDB区别**：MyISAM是MySQL的默认数据库引擎（5.5版本之前）。虽然性能极佳，而且提供了大量的特性，包括全文索引、压缩、空间函数等，但MyISAM不支持事务和行级锁，而且最大的缺陷就是奔溃后无法安全恢复。

## 字符集和校对规则

**字符集**指一种从二进制编码到某类字符符号的映射。

**校对规则**指某种字符集下的排序规则。MySQL每一种字符集都会对应一系列的校对规则。

## 索引

MySQL索引使用的数据结构主要有**BTree索引**和**哈希索引**。

- 哈希索引底层的数据结构就是**哈希表**，适用于**单条记录查询**；其余情况建议使用BTree索引。

- MySQL的BTree索引的数据结构是**B+Tree**。

**B+Tree在InnoDB引擎的实现**：索引文件和数据文件是分离的，其表数据文件本身按照B+Tree组织的一个索引结构，树的叶节点data域保存了完整的数据记录。这个索引的key是数据表的主键，因此InnoDB表数据文件本身就是主索引。这被称为“**聚簇索引**”。其余索引都作为辅助索引，辅助索引的data域存储相应记录主键的值而不是地址。

在根据主索引搜索时，直接找到key所在的节点即可取出数据；在根据辅助索引查找时，则需要先取出主键的值，再走一遍主索引。**因此，在设计表的时候，不建议使用过长的字段作为主键，也不建议使用非单调的字段作为主键，这样会造成主索引频繁分裂**。

## 事务

事务是逻辑上的**一组操作**，**要么都执行，要么都不执行**。

四大特性：

1. **原子性（Atomicity）**：事务是最小的执行单位，不允许分割。
2. **一致性（Consistency）**：执行事务前后，数据保持一致。
3. **隔离性（Isolation）**：各并发事务之间数据库是独立的。
4. **持久性（Durability）**：事务对数据库中数据的改变是持久的。





















